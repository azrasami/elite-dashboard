<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Elite Ads Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
body {
  font-family: Arial, sans-serif;
  background: #f3f4f6;
  margin: 0;
  padding: 20px;
  text-align: center;
}

.container {
  max-width: 1000px;
  margin: auto;
  background: #fff;
  padding: 25px;
  border-radius: 15px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.section-title {
  font-size: 24px;
  margin-bottom: 20px;
  color: #111827;
  font-weight: bold;
}

.filters {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-bottom: 25px;
  flex-wrap: wrap;
}

.filters input {
  padding: 7px 10px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  width: 250px;
}

.filters button {
  background: #111827;
  color: white;
  padding: 7px 15px;
  border-radius: 6px;
  cursor: pointer;
  border: none;
}

.campaigns-table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  border-radius: 10px;
  overflow: hidden;
}

.campaigns-table th, 
.campaigns-table td {
  padding: 12px;
  border-bottom: 1px solid #e5e7eb;
  text-align: center;
}

.good { color: #059669; font-weight: bold; }
.bad { color: #dc2626; font-weight: bold; }

</style>
</head>

<body>

<div class="container">

  <h2 class="section-title">ðŸ“Š Ad Campaigns (Prototype)</h2>

  <div class="filters">
    <input type="text" id="accountId" placeholder="Example: act_1234567890">
    <input type="text" id="userToken" placeholder="Paste User Token here">
    <button onclick="fetchCampaigns()">Load Campaigns</button>
  </div>

  <table class="campaigns-table">
    <thead>
      <tr>
        <th>Campaign Name</th>
        <th>Results</th>
        <th>Spend</th>
        <th>CPC</th>
        <th>ROAS</th>
      </tr>
    </thead>
    <tbody id="campaignsBody">
      <tr><td colspan="5">Enter details and click Load Campaigns</td></tr>
    </tbody>
  </table>

</div>

<script>

async function fetchCampaigns() {

  // â­ Fake realistic prototype data (ONLY ACTIVE + results)
  const fakeData = [
    // Real store campaigns
    { name: "Store â€“ Purchase â€“ LLA 1%", status: "ACTIVE",
      insights: [{ actions:[{action_type:"purchase", value:18}], spend:120, cpc:0.70, roas:[{value:4.8}] }]},
      
    { name: "Store â€“ Retargeting â€“ ATC", status: "ACTIVE",
      insights: [{ actions:[{action_type:"purchase", value:9}], spend:60, cpc:0.55, roas:[{value:3.1}] }]},
      
    { name: "Store â€“ Broad â€“ Men 20-40", status: "ACTIVE",
      insights: [{ actions:[{action_type:"purchase", value:5}], spend:80, cpc:0.62, roas:[{value:1.6}] }]},

    // Losers (still Active)
    { name: "Cold â€“ Broad Test 3", status: "ACTIVE",
      insights: [{ actions:[{action_type:"purchase", value:1}], spend:45, cpc:1.20, roas:[{value:0.3}] }]},
      
    { name: "Audience Test â€“ Interest A", status: "ACTIVE",
      insights: [{ actions:[{action_type:"purchase", value:0}], spend:35, cpc:0.85, roas:[{value:0}] }]},
  ];

  // Filter only ACTIVE store campaigns
  const activeOnly = fakeData.filter(c => c.status === "ACTIVE");

  renderTable(activeOnly);
}

function renderTable(campaigns) {
  const body = document.getElementById("campaignsBody");
  body.innerHTML = "";

  campaigns.forEach(camp => {
    const insights = camp.insights ? camp.insights[0] : null;

    const results = insights?.actions?.find(a => a.action_type === "purchase")?.value || 0;
    const spend = insights?.spend || 0;
    const cpc = insights?.cpc || 0;
    const roas = insights?.roas?.[0]?.value || 0;

    const roasClass = roas >= 1 ? "good" : "bad";

    body.innerHTML += `
      <tr>
        <td>${camp.name}</td>
        <td>${results}</td>
        <td>$${spend}</td>
        <td>$${cpc}</td>
        <td class="${roasClass}">${roas}</td>
      </tr>
    `;
  });
}

</script>

</body>
</html>
